NAME			= pipex
NAME_B			= $(BONUS_PATH)/pipex

CC				= cc
CFLAGS			= -Wall -Wextra -Werror

RM				= rm -rf

HEADER			= ./pipex.h
HEADER_B		= ./bonus/pipex_bonus.h

LIBFT			= ./libft

SRCS			= pipex.c			\
			  	  utils.c		

BONUS_PATH		= ./bonus
SRCS_B  		= pipex_bonus.c		\
				  utils_bonus.c		\
				  get_next_line.c	

OBJS 			= $(SRCS:.c=.o)
OBJECTS_B		= ${addprefix ${BONUS_PATH}, ${SRCS_B:.c=.o}}

%.o: %.c:		${HEADER}
				@${CC} ${CFLAGS} -c $< -o ${<:.c=.o}

$(NAME): 		$(OBJS) $(HEADER)
				$(CC) $(CFLAGS) -o $(NAME) $(OBJS)
				make -C $(LIBFT)
				$(CC) -o $(NAME) -L $(LIBFT) -lft $(OBJS)

$(NAME_BONUS):	$(OBJS_B) $(HEADER_B)
				$(CC) $(CFLAGS) -o $(NAME_B) $(OBJS_B)
				make -C $(LIBFT)
				$(CC) -o $(NAME) -L $(LIBFT) -lft $(OBJS)

all: 			$(NAME)

bonus:			$(NAME_B)

clean:
				$(RM) $(OBJS) $(OBJS_B)
				make clean -C $(LIBFT)

fclean: clean
	$(RM) $(NAME) $(NAME_B)
	make fclean -C $(LIBFT)

re:	
	make fclean 
	make all

.PHONY: all clean fclean re